<div class="d-flex justify-content-between p-2">
    <h3 class="mt-1">Trips</h3>
    <app-button label="Trip" icon="add" class="btn btn-secondary" (btnClick)="openDialog()"></app-button>
</div>


<div class="table-wrapper">
    <table mat-table [dataSource]="tripList()" class="mat-elevation-z8">
        <ng-container matColumnDef="driverName">
            <th mat-header-cell *matHeaderCellDef> Driver </th>
            <td mat-cell *matCellDef="let item"> {{item.driverName}} </td>
        </ng-container>

        <ng-container matColumnDef="vehicleName">
            <th mat-header-cell *matHeaderCellDef> Vehicle </th>
            <td mat-cell *matCellDef="let item"> {{item.vehicleName}} </td>
        </ng-container>

        <ng-container matColumnDef="origin">
            <th mat-header-cell *matHeaderCellDef> Origin </th>
            <td mat-cell *matCellDef="let item"> {{item.origin}} </td>
        </ng-container>

        <ng-container matColumnDef="startTime">
            <th mat-header-cell *matHeaderCellDef> Start Time </th>
            <td mat-cell *matCellDef="let item"> {{item.startTime | date: dateFormatHHMM}} </td>
        </ng-container>

        <ng-container matColumnDef="destination">
            <th mat-header-cell *matHeaderCellDef> Destination </th>
            <td mat-cell *matCellDef="let item"> {{item.destination}} </td>
        </ng-container>

        <ng-container matColumnDef="endTime">
            <th mat-header-cell *matHeaderCellDef> End Time </th>
            <td mat-cell *matCellDef="let item"> {{item.endTime | date: dateFormatHHMM}} </td>
        </ng-container>

        <ng-container matColumnDef="status">
            <th mat-header-cell *matHeaderCellDef> Status </th>
            <td mat-cell *matCellDef="let item"> {{tripStatus[item.status]}} </td>
        </ng-container>

        <ng-container matColumnDef="tripId">
            <th mat-header-cell *matHeaderCellDef> Action </th>
            <td mat-cell *matCellDef="let item">
                <mat-icon (click)="openDialog(item.tripId)">edit</mat-icon>
                <mat-icon (click)="deleteDialog(item.tripId)">delete</mat-icon>
            </td>
        </ng-container>

        <ng-container matColumnDef="trip">
            <th mat-header-cell *matHeaderCellDef> Make As In-Progress </th>
            <td mat-cell *matCellDef="let item">
                @if(item.status === 1 && dateIsCurrentDate(item.startTime)){
                <mat-icon (click)="markTripInprogress(item.tripId)">check</mat-icon>
                }
            </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
</div>